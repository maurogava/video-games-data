(this.webpackJsonprepo=this.webpackJsonprepo||[]).push([[3],{51:function(e,t,c){e.exports={button:"Sort_button__1EEZx",arrow:"Sort_arrow__3eabM",up:"Sort_up__3FQGM",down:"Sort_down__3zF2_",upActive:"Sort_upActive__1laXk",downActive:"Sort_downActive__1MsZY"}},52:function(e,t,c){e.exports={wrapper:"Search_wrapper__njBju"}},53:function(e,t,c){e.exports={container:"Dropdown_container__2JzP-",button:"Dropdown_button__3vW7v",listWrapper:"Dropdown_listWrapper__2n2jZ",isOpened:"Dropdown_isOpened__Apnh3"}},54:function(e,t,c){e.exports={wrapper:"Filters_wrapper__2-ZBO",dropdown:"Filters_dropdown__34cCf",groupTitle:"Filters_groupTitle__iFPDl",orderByBtn:"Filters_orderByBtn__3ISuj",icon:"Filters_icon__1Xi_-"}},55:function(e,t,c){e.exports={withButton:"TableHead_withButton__ho9km",th:"TableHead_th__3PI0w"}},56:function(e,t,c){e.exports={row:"TableBody_row__12E4g",cell:"TableBody_cell__1DaWe",title:"TableBody_title__eHiHv"}},57:function(e,t,c){e.exports={table:"Table_table__3qmb0"}},58:function(e,t,c){e.exports={table:"Home_table__2Y52P",title:"Home_title__376vd",platform:"Home_platform__SWyfp",score:"Home_score__3Usls",genre:"Home_genre__3YPM8",choice:"Home_choice__2tMbU"}},60:function(e,t,c){"use strict";c.r(t);var r=c(0),s=c(23),a=c(30),n=c(14),o=c.n(n);var l=c(5);const i=Object(r.createContext)({data:[],currentSortField:{},sortFields:[],actions:{search:()=>{},orderBy:()=>{}}}),u=()=>Object(r.useContext)(i),d=e=>{let{children:t,data:c,columns:s}=e;const a=Object(r.useMemo)((()=>c.filter((e=>{let{title:t}=e;return t}))),[c]),n=Object(r.useMemo)((()=>s.filter((e=>{let{hasSort:t}=e;return t})).map((e=>{let{title:t,accesor:c}=e;return{title:t,accesor:c}}))),[s]),[o,u]=Object(r.useState)(a),d=Object(r.useRef)({}),j=Object(r.useRef)(),b=Object(r.useCallback)(((e,t)=>{let c;const r="number"===typeof a[0][t]?(s=t,n=e,(e,t)=>"asc"===n?e[s]-t[s]:t[s]-e[s]):((e,t)=>(c,r)=>c[e]>r[e]?"asc"===t?1:-1:c[e]<r[e]?"asc"===t?-1:1:0)(t,e);var s,n;const o=j.current?[...j.current]:[...a];d.current={columnName:t,direction:e},"asc"===e||"desc"===e?c=o.sort(r):(c=o,d.current={}),u(c)}),[a]),m=Object(r.useCallback)((e=>{let t;e.length?(t=a.filter((t=>{let{title:c}=t;return"string"===typeof c&&new RegExp(e,"i").test(c)})),j.current=t):(t=[...a],j.current=void 0);const{direction:c,columnName:r}=d.current;c&&r&&"none"!==c?b(c,r):u(t)}),[b,a]),_=Object(r.useMemo)((()=>({data:o,currentSortField:d.current,sortFields:n,actions:{search:m,orderBy:b}})),[o,b,m,n]);return Object(l.jsx)(i.Provider,{value:_,children:t})};var j=c(59),b=c(51),m=c.n(b);var _=e=>{let{children:t,columnName:c,className:s=""}=e;const a=Object(r.useRef)(0),n=Object(r.useMemo)((()=>["none","asc","desc"]),[]),{currentSortField:{columnName:i,direction:d},actions:{orderBy:j}}=u(),b=d&&n.indexOf(d);b&&b>-1&&(a.current=b),c!==i&&(a.current=0);const _=Object(r.useCallback)((()=>{a.current=(a.current+1)%3,j(n[a.current],c)}),[c,n,j]),p=n[a.current];return Object(l.jsxs)("button",{type:"button",className:o()(m.a.button,s),onClick:_,children:[t,Object(l.jsx)("span",{className:o()(m.a.arrow,m.a.up,{[m.a.upActive]:"asc"===p&&c===i})}),Object(l.jsx)("span",{className:o()(m.a.arrow,m.a.down,{[m.a.downActive]:"desc"===p&&c===i})})]})},p=c(52),h=c.n(p);var O=Object(r.memo)((e=>{let{className:t}=e;const{actions:{search:c}}=u(),s=Object(r.useCallback)((e=>c(e.currentTarget.value)),[c]);return Object(l.jsxs)("div",{className:o()(h.a.wrapper,t),children:[Object(l.jsx)("label",{htmlFor:"search",children:"Search:"}),Object(l.jsx)("input",{id:"search",type:"text",onChange:s})]})}));var x=e=>{let{children:t}=e;return Object(l.jsx)(l.Fragment,{children:t})};var v=e=>{let{children:t}=e;return Object(l.jsx)(l.Fragment,{children:t})},f=c(53),N=c.n(f);const w=e=>{var t;let{children:c,className:s=""}=e;const[a,n]=Object(r.useState)(!1);Object(r.useEffect)((()=>{if(!a)return;const e=()=>n(!1);return document.addEventListener("click",e),()=>document.removeEventListener("click",e)}),[a]);const i=Object(r.useCallback)((()=>n(!0)),[]),u=r.Children.toArray(c),d=u.find((e=>(null===e||void 0===e?void 0:e.type)===x)),j=u.filter((e=>(null===e||void 0===e?void 0:e.type)===v));return Object(l.jsxs)("div",{className:o()(N.a.container,s),children:[Object(l.jsx)("button",{type:"button",className:o()(N.a.button,null===d||void 0===d||null===(t=d.props)||void 0===t?void 0:t.className),onClick:i,children:d}),Object(l.jsx)("div",{className:o()(N.a.listWrapper,a&&N.a.isOpened),children:j})]})};w.Label=x,w.Item=v;var g=w,y=c(54),S=c.n(y);const{Label:F,Item:B}=g;var k=()=>{const{sortFields:e}=u();if(!e.length)return null;const t=e.map((e=>{let{title:t,accesor:c}=e;return Object(l.jsx)(B,{children:Object(l.jsx)(_,{columnName:c,children:t})},c)}));return Object(l.jsxs)("div",{className:S.a.wrapper,children:[Object(l.jsxs)(g,{className:S.a.dropdown,children:[Object(l.jsx)(F,{children:Object(l.jsx)(j.a,{className:S.a.icon})}),Object(l.jsx)(B,{children:Object(l.jsx)("div",{className:S.a.groupTitle,children:"Order By:"})}),t]}),Object(l.jsx)(O,{})]})},C=c(55),T=c.n(C);var H=e=>{let{columns:t}=e;const c=t.map((e=>{let{title:t,accesor:c,className:r,hasSort:s}=e;return Object(l.jsxs)("th",{className:o()(T.a.th,r),children:[t,s&&Object(l.jsx)(_,{columnName:c})]},c)}));return Object(l.jsx)("thead",{children:Object(l.jsx)("tr",{children:c})})},M=c(56),A=c.n(M);var E=e=>{let{columns:t}=e,c=Object(l.jsx)("p",{children:"There is no data"});const{data:r}=u();return(null===r||void 0===r?void 0:r.length)&&(c=r.reduce(((e,c)=>{if(void 0===c.api_rate_limit){const r=Object(l.jsx)("tr",{className:A.a.row,children:t.map((e=>{let{title:t,accesor:r,className:s}=e;return Object(l.jsxs)("td",{className:o()(A.a.cell,s),children:[Object(l.jsxs)("strong",{className:A.a.title,children:[t,":"]}),c[r]]},r)}))},"".concat(c.title).concat(c.platform));e.push(r)}return e}),[])),Object(l.jsx)("tbody",{children:c})},P=c(57),W=c.n(P);var D=e=>{let{columns:t,data:c,className:r}=e;const s={"--columns":t.length};return Object(l.jsxs)(d,{columns:t,data:c,children:[Object(l.jsx)(k,{}),Object(l.jsxs)("table",{className:o()(W.a.table,r),style:s,children:[Object(l.jsx)(H,{columns:t}),Object(l.jsx)(E,{columns:t})]})]})},L=c(58),I=c.n(L);const R=()=>fetch("https://s3-ap-southeast-1.amazonaws.com/he-public-data/gamesarena274f2bf.json").then((e=>e.json()));t.default=()=>{const{isLoading:e,error:t,data:c}=Object(s.useQuery)("gamesdata",R,{refetchOnWindowFocus:!1});console.log("Home");const n=Object(r.useMemo)((()=>[{title:"Title",accesor:"title",className:I.a.title},{title:"Platform",accesor:"platform",className:I.a.platform},{title:"Score",accesor:"score",className:I.a.score,hasSort:!0},{title:"Genre",accesor:"genre",className:I.a.genre},{title:"Editor's choice",accesor:"editors_choice",className:I.a.choice}]),[]);return e?Object(l.jsx)(a.a,{}):t||!c?Object(l.jsx)("p",{children:"An error has occurred"}):Object(l.jsx)(D,{columns:n,data:c,className:I.a.table})}}}]);
//# sourceMappingURL=3.c66befb5.chunk.js.map